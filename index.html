<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Plan B: Strategic Acquisition Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; background-color: #f8fafc; }
        
        /* Map Container */
        #map { width: 100%; height: 100%; min-height: 450px; z-index: 1; }
        @media (min-width: 768px) { #map { min-height: 550px; } }
        
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* Tooltips & Popups */
        .leaflet-popup-content-wrapper { border-radius: 8px; font-family: 'Inter', 'Noto Sans KR', sans-serif; font-size: 12px; }
        .leaflet-popup-content b { color: #0f172a; font-size: 13px; }
        
        .matrix-point { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .matrix-point:hover { transform: scale(1.5); z-index: 50; box-shadow: 0 0 15px rgba(0,0,0,0.2); }
        .matrix-tooltip { opacity: 0; pointer-events: none; transition: opacity 0.2s; z-index: 100; }
        .matrix-point:hover .matrix-tooltip { opacity: 1; }
        
        /* Utility */
        .hidden-view { display: none !important; }
        .active-tab { background-color: #1e293b; color: white; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .inactive-tab { background-color: white; color: #64748b; border: 1px solid #e2e8f0; }
        
        /* Lang Visibility */
        .lang-en { display: block; }
        .lang-ko { display: none; }
        body.korean-mode .lang-en { display: none; }
        body.korean-mode .lang-ko { display: block; }
    </style>
</head>
<body class="p-3 md:p-6 text-slate-800">

    <!-- Top Bar: Title & Lang Switch -->
    <header class="max-w-7xl mx-auto mb-6 flex flex-col md:flex-row justify-between items-center gap-4">
        <div class="text-center md:text-left">
            <h1 class="text-2xl md:text-3xl font-extrabold text-slate-900 tracking-tight">
                <span class="lang-en">Project Plan B: Strategy Platform</span>
                <span class="lang-ko">í”„ë¡œì íŠ¸ í”Œëœ B: ì „ëµì  ì¸ìˆ˜ í”Œë«í¼</span>
            </h1>
            <p class="text-sm md:text-base text-slate-500 mt-1">
                <span class="lang-en">Acquisition Strategy: River Supply + Freezing + Distribution</span>
                <span class="lang-ko">LBP ê¸°ëŠ¥ ë³µì œ: ê°•/ë¯¼ë¬¼ ê³µê¸‰ + ëƒ‰ë™ + ìœ í†µë§ í™•ë³´</span>
            </p>
        </div>
        
        <!-- Language Toggle -->
        <div class="flex bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
            <button onclick="setLang('en')" id="btn-lang-en" class="px-3 py-1.5 text-xs font-bold rounded-md bg-slate-800 text-white transition-all">ENG</button>
            <button onclick="setLang('ko')" id="btn-lang-ko" class="px-3 py-1.5 text-xs font-bold rounded-md text-slate-500 hover:bg-slate-50 transition-all">KOR</button>
        </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="max-w-4xl mx-auto mb-6 flex flex-col sm:flex-row justify-center gap-3">
        <button onclick="switchView('overview')" id="btn-overview" class="active-tab w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-sm transition-all transform active:scale-95 text-center">
            <span class="lang-en">ğŸ“Š Strategy Dashboard</span>
            <span class="lang-ko">ğŸ“Š ì „ëµ ëŒ€ì‹œë³´ë“œ (ì§€ë„/ë§¤íŠ¸ë¦­ìŠ¤)</span>
        </button>
        <button onclick="switchView('list')" id="btn-list" class="inactive-tab w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-sm transition-all transform active:scale-95 text-center">
            <span class="lang-en">ğŸ“‹ Full Target List (35)</span>
            <span class="lang-ko">ğŸ“‹ ì „ì²´ íƒ€ê²Ÿ ë¦¬ìŠ¤íŠ¸ (35ê°œì‚¬)</span>
        </button>
    </div>

    <!-- VIEW 1: OVERVIEW -->
    <div id="view-overview" class="animate-fade-in space-y-6 max-w-7xl mx-auto">
        
        <!-- 1. MAP -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-2">
                <h2 class="text-lg md:text-xl font-bold text-slate-800 flex items-center gap-2">
                    <span class="bg-slate-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">1</span>
                    <span class="lang-en">Regional Node Map</span>
                    <span class="lang-ko">ì§€ì—­ë³„ ê±°ì  ì§€ë„</span>
                </h2>
                <!-- Desktop Legend -->
                <div class="hidden md:flex gap-4 text-xs font-semibold">
                    <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-emerald-500"></span> <span class="lang-en">Freshwater</span><span class="lang-ko">ë¯¼ë¬¼/ê°•</span></div>
                    <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-blue-600"></span> <span class="lang-en">Processor</span><span class="lang-ko">ê°€ê³µì—…ì²´</span></div>
                    <div class="flex items-center gap-1"><span class="w-3 h-3 rounded-full bg-purple-600"></span> <span class="lang-en">Cold Hub</span><span class="lang-ko">ëƒ‰ë™ í—ˆë¸Œ</span></div>
                </div>
            </div>
            
            <div class="relative w-full rounded-lg border border-slate-200 overflow-hidden bg-slate-50 flex flex-col h-[500px]">
                <div id="map" class="flex-grow"></div>
                <!-- Mobile Legend -->
                <div class="md:hidden bg-white/95 p-3 border-t border-slate-200 text-xs">
                    <div class="flex flex-wrap gap-3 justify-center">
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-emerald-500"></div> <span class="lang-en">Freshwater</span><span class="lang-ko">ë¯¼ë¬¼/ê°•</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-blue-600"></div> <span class="lang-en">Processor</span><span class="lang-ko">ê°€ê³µì—…ì²´</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded-full bg-purple-600"></div> <span class="lang-en">Cold Hub</span><span class="lang-ko">ëƒ‰ë™ í—ˆë¸Œ</span></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 2. FLOWCHART -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6">
            <h2 class="text-lg md:text-xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                <span class="bg-slate-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">2</span>
                <span class="lang-en">Roll-Up Strategy Logic</span>
                <span class="lang-ko">ë¡¤ì—…(Roll-Up) ì „ëµ êµ¬ì¡°</span>
            </h2>

            <div class="flex flex-col md:flex-row items-stretch justify-center gap-4 relative">
                <div class="hidden md:block absolute top-1/2 left-0 w-full h-0.5 bg-slate-200 -z-0 transform -translate-y-1/2"></div>
                
                <!-- Step 1 -->
                <div class="relative z-10 flex-1 bg-white border-2 border-emerald-100 rounded-xl p-4 shadow-sm">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-emerald-500 text-white text-[10px] font-bold px-3 py-1 rounded-full">INPUT 1</div>
                    <div class="text-center">
                        <div class="text-3xl mb-2">ğŸŸ</div>
                        <h3 class="font-bold text-slate-800 text-sm md:text-base">
                            <span class="lang-en">River Node</span><span class="lang-ko">ê°•/ë¯¼ë¬¼ ê±°ì </span>
                        </h3>
                        <p class="text-xs text-slate-500 mt-1">
                            <span class="lang-en">Raw Material Access</span><span class="lang-ko">ì›ë¬¼(Carp) í™•ë³´</span>
                        </p>
                    </div>
                </div>

                <div class="self-center text-slate-300 text-xl font-bold z-10 block md:hidden">â†“</div>
                <div class="self-center text-slate-300 text-xl font-bold z-10 hidden md:block">+</div>

                <!-- Step 2 -->
                <div class="relative z-10 flex-1 bg-white border-2 border-purple-100 rounded-xl p-4 shadow-sm">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-purple-500 text-white text-[10px] font-bold px-3 py-1 rounded-full">INPUT 2</div>
                    <div class="text-center">
                        <div class="text-3xl mb-2">â„ï¸</div>
                        <h3 class="font-bold text-slate-800 text-sm md:text-base">
                            <span class="lang-en">Cold Hub</span><span class="lang-ko">ëƒ‰ë™ ì¸í”„ë¼</span>
                        </h3>
                        <p class="text-xs text-slate-500 mt-1">
                            <span class="lang-en">Inventory Buffer</span><span class="lang-ko">ì¬ê³  ë³´ê´€/ë²„í¼</span>
                        </p>
                    </div>
                </div>

                <div class="self-center text-slate-300 text-xl font-bold z-10 block md:hidden">â†“</div>
                <div class="self-center text-slate-300 text-xl font-bold z-10 hidden md:block">+</div>

                <!-- Step 3 -->
                <div class="relative z-10 flex-1 bg-white border-2 border-blue-100 rounded-xl p-4 shadow-sm">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-blue-500 text-white text-[10px] font-bold px-3 py-1 rounded-full">INPUT 3</div>
                    <div class="text-center">
                        <div class="text-3xl mb-2">âš™ï¸</div>
                        <h3 class="font-bold text-slate-800 text-sm md:text-base">
                            <span class="lang-en">Processor</span><span class="lang-ko">ê°€ê³µ ì‹œì„¤</span>
                        </h3>
                        <p class="text-xs text-slate-500 mt-1">
                            <span class="lang-en">Packing & HACCP</span><span class="lang-ko">í¬ì¥ ë° HACCP</span>
                        </p>
                    </div>
                </div>

                <div class="self-center text-slate-400 text-2xl z-10 transform md:rotate-0 rotate-90 my-2 md:my-0">â”</div>

                <!-- Outcome -->
                <div class="relative z-10 flex-1 bg-slate-800 text-white rounded-xl p-4 shadow-lg ring-4 ring-slate-100">
                    <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-slate-600 border border-slate-500 text-white text-[10px] font-bold px-3 py-1 rounded-full">GOAL</div>
                    <div class="text-center h-full flex flex-col justify-center">
                        <h3 class="font-bold text-base md:text-lg text-yellow-400">
                            <span class="lang-en">LBP Replaced</span><span class="lang-ko">LBP ê¸°ëŠ¥ ëŒ€ì²´</span>
                        </h3>
                        <div class="w-full h-px bg-slate-600 my-2"></div>
                        <p class="text-xs text-slate-300">
                            <span class="lang-en">Bait + Frozen Protein</span><span class="lang-ko">ë¯¸ë¼ + ëƒ‰ë™ ë‹¨ë°±ì§ˆ ê³µê¸‰</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 3. MATRIX -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 md:p-6">
            <h2 class="text-lg md:text-xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                <span class="bg-slate-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">3</span>
                <span class="lang-en">Target Positioning Matrix</span>
                <span class="lang-ko">íƒ€ê²Ÿ í¬ì§€ì…”ë‹ ë§¤íŠ¸ë¦­ìŠ¤</span>
            </h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                <!-- Chart -->
                <div class="lg:col-span-3 relative bg-slate-50 border border-slate-200 rounded-lg aspect-square md:aspect-[16/9] p-4 md:p-8 overflow-hidden select-none">
                    <!-- Quadrants -->
                    <div class="absolute inset-0 grid grid-cols-2 grid-rows-2">
                        <div class="bg-emerald-50/30 border-r border-b border-slate-200/50"></div>
                        <div class="bg-slate-50/30 border-b border-slate-200/50"></div>
                        <div class="bg-slate-50/30 border-r border-slate-200/50"></div>
                        <div class="bg-blue-50/30"></div>
                    </div>
                    <!-- Axis Labels -->
                    <div class="absolute bottom-1 right-2 text-[10px] font-bold text-slate-400 uppercase">
                        <span class="lang-en">Cold Chain Capability â†’</span><span class="lang-ko">ëƒ‰ë™ ì¸í”„ë¼ ì—­ëŸ‰ â†’</span>
                    </div>
                    <div class="absolute top-2 left-1 text-[10px] font-bold text-slate-400 uppercase writing-vertical" style="writing-mode: vertical-rl; transform: rotate(180deg);">
                        <span class="lang-en">Freshwater Adjacency â†’</span><span class="lang-ko">ë¯¼ë¬¼/ê°• ì ‘ê·¼ì„± â†’</span>
                    </div>

                    <!-- Quadrant Titles -->
                    <div class="absolute top-2 left-8 text-xs font-bold text-emerald-700 opacity-70">
                        <span class="lang-en">PURE RIVER NODES</span><span class="lang-ko">ìˆœìˆ˜ ê°• ê±°ì </span>
                    </div>
                    <div class="absolute top-2 right-4 text-xs font-bold text-purple-700 opacity-70 text-right">
                        <span class="lang-en">UNICORNS</span><span class="lang-ko">ìœ ë‹ˆì½˜ (ì´ìƒì )</span>
                    </div>
                    <div class="absolute bottom-4 left-8 text-xs font-bold text-slate-400 opacity-70">
                        <span class="lang-en">BOLT-ONS</span><span class="lang-ko">ì†Œê·œëª¨ ì¸ìˆ˜</span>
                    </div>
                    <div class="absolute bottom-4 right-4 text-xs font-bold text-blue-700 opacity-70 text-right">
                        <span class="lang-en">INDUSTRIAL</span><span class="lang-ko">ì‚°ì—…ìš© ê°€ê³µ</span>
                    </div>

                    <!-- Crosshair -->
                    <div class="absolute top-0 bottom-0 left-1/2 border-l border-dashed border-slate-300 pointer-events-none"></div>
                    <div class="absolute left-0 right-0 top-1/2 border-t border-dashed border-slate-300 pointer-events-none"></div>

                    <!-- Points Container -->
                    <div id="matrix-container" class="absolute inset-0 m-6 md:m-8 z-10"></div>
                </div>

                <!-- Legend -->
                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col justify-center gap-3">
                    <h3 class="font-bold text-sm text-slate-700 border-b pb-2">
                        <span class="lang-en">Matrix Key</span><span class="lang-ko">ë²”ë¡€</span>
                    </h3>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 bg-emerald-500 rounded-full border border-white shadow-sm"></div><span class="text-xs font-bold"><span class="lang-en">Procurement</span><span class="lang-ko">ì¡°ë‹¬</span></span></div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 bg-blue-600 rounded-sm border border-white shadow-sm"></div><span class="text-xs font-bold"><span class="lang-en">Processors</span><span class="lang-ko">ê°€ê³µ</span></span></div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 bg-purple-600 rotate-45 border border-white shadow-sm"></div><span class="text-xs font-bold"><span class="lang-en">Hubs</span><span class="lang-ko">í—ˆë¸Œ</span></span></div>
                    <div class="mt-2 text-[10px] text-slate-500 leading-snug">
                        <span class="lang-en">Combine Top-Left (Supply) with Bottom-Right (Freezing).</span>
                        <span class="lang-ko">ì¢Œìƒë‹¨(ê³µê¸‰) ê¸°ì—…ê³¼ ìš°í•˜ë‹¨(ëƒ‰ë™) ê¸°ì—…ì„ ê²°í•©í•˜ëŠ” ê²ƒì´ í•µì‹¬.</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- VIEW 2: LIST -->
    <div id="view-list" class="hidden-view max-w-[1400px] mx-auto">
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 p-3 md:p-6">
            <h2 class="text-lg md:text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                <span class="bg-slate-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs flex-shrink-0">4</span>
                <span class="lang-en">Target Dashboard (35 Companies)</span>
                <span class="lang-ko">íƒ€ê²Ÿ ëŒ€ì‹œë³´ë“œ (35ê°œì‚¬ ìƒì„¸)</span>
            </h2>
            
            <div class="overflow-x-auto custom-scroll">
                <table class="w-full text-left text-sm border-collapse min-w-[1000px]">
                    <thead class="bg-slate-100 sticky top-0 z-10 shadow-sm text-xs uppercase text-slate-600 font-bold">
                        <tr>
                            <th class="p-3 border-b border-slate-200 w-[18%]"><span class="lang-en">Company</span><span class="lang-ko">ê¸°ì—…ëª…</span></th>
                            <th class="p-3 border-b border-slate-200 w-[12%]"><span class="lang-en">Location</span><span class="lang-ko">ìœ„ì¹˜</span></th>
                            <th class="p-3 border-b border-slate-200 w-[10%] text-center"><span class="lang-en">Category</span><span class="lang-ko">ì¹´í…Œê³ ë¦¬</span></th>
                            <th class="p-3 border-b border-slate-200 w-[20%]"><span class="lang-en">Main Activity</span><span class="lang-ko">ì£¼ìš” í™œë™</span></th>
                            <th class="p-3 border-b border-slate-200 w-[20%]"><span class="lang-en">Why It Matters</span><span class="lang-ko">ì¤‘ìš”ì„±</span></th>
                            <th class="p-3 border-b border-slate-200 w-[20%]"><span class="lang-en">Notes</span><span class="lang-ko">ë¹„ê³ /ë¦¬ìŠ¤í¬</span></th>
                        </tr>
                    </thead>
                    <tbody id="target-table-body" class="divide-y divide-slate-100 text-xs md:text-sm">
                        <!-- JS renders rows here -->
                    </tbody>
                </table>
            </div>
        </section>
    </div>

    <!-- SCRIPTS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        // --- DATASET: SINGLE SOURCE OF TRUTH ---
        // name_ko removed or ignored in display logic as requested
        const companies = [
            // A) PROCUREMENT
            { id:1, name_en:"Hwy 1 Fish Market", loc:"Simmesport, LA", cat_code:"A", cat_en:"Procurement", cat_ko:"ì¡°ë‹¬ (Procurement)", act_en:"Freshwater fish buying/market node.", act_ko:"ë¯¼ë¬¼ê³ ê¸° ë§¤ì… ë° ì‹œì¥ ê±°ì ", why_en:"Simmesport is a strategic freshwater crossroads.", why_ko:"ì‹¬ìŠ¤í¬íŠ¸ëŠ” ë¯¼ë¬¼/ê°• ì „ëµì  ìš”ì¶©ì§€", note_en:"Needs upgrade; treat as platform node.", note_ko:"ì‹œì„¤ ì—…ê·¸ë ˆì´ë“œ í•„ìš” (í”Œë«í¼ ê´€ì  ì ‘ê·¼)", lat:30.9754, lng:-91.8032, type:"proc", mx:15, my:92 },
            { id:2, name_en:"Simmesport Fish Co", loc:"Simmesport, LA", cat_code:"A", cat_en:"Procurement", cat_ko:"ì¡°ë‹¬ (Procurement)", act_en:"Registered seafood/fish business.", act_ko:"ë“±ë¡ëœ ìˆ˜ì‚°ë¬¼/ì–´ë¥˜ ì‚¬ì—…ì²´", why_en:"Collection node in inland logistics corridor.", why_ko:"ë‚´ë¥™ ë¬¼ë¥˜ íšŒë‘ì˜ ìˆ˜ì§‘ ê±°ì ", note_en:"Verify actual operating scale.", note_ko:"ì‹¤ì œ ìš´ì˜ ê·œëª¨ í™•ì¸ í•„ìš”", lat:30.9822, lng:-91.8150, type:"proc", mx:25, my:90 },
            { id:3, name_en:"Coco's Seafood", loc:"Simmesport, LA", cat_code:"A", cat_en:"Procurement", cat_ko:"ì¡°ë‹¬ (Procurement)", act_en:"Local seafood/fish business.", act_ko:"ì§€ì—­ ìˆ˜ì‚°ë¬¼ ì—…ì²´", why_en:"Redundancy in freshwater supply zone.", why_ko:"ë¯¼ë¬¼ ê³µê¸‰ë§ì˜ ì•ˆì •ì„± í™•ë³´(ì´ì¤‘í™”)", note_en:"Check dealer compliance/licenses.", note_ko:"ë”œëŸ¬ ë¼ì´ì„ ìŠ¤/ê·œì • ì¤€ìˆ˜ ì—¬ë¶€ í™•ì¸", lat:30.9950, lng:-91.8250, type:"proc", mx:18, my:88 },
            { id:4, name_en:"Three River Fish Co", loc:"Simmesport, LA", cat_code:"A", cat_en:"Procurement", cat_ko:"ì¡°ë‹¬ (Procurement)", act_en:"Listed fish/seafood business.", act_ko:"ìˆ˜ì‚°ë¬¼ ì‚¬ì—…ì²´", why_en:"Part of supply web feeding central freezer.", why_ko:"ì¤‘ì•™ ëƒ‰ë™ì°½ê³ ë¡œ ì—°ê²°ë˜ëŠ” ê³µê¸‰ë§ì˜ ì¼ë¶€", note_en:"Confirm activity & species mix.", note_ko:"ì·¨ê¸‰ ì–´ì¢… ë° í™œë™ ì—¬ë¶€ í™•ì¸", lat:30.9810, lng:-91.8130, type:"proc", mx:22, my:85 },
            { id:5, name_en:"Bordelon's Fish Market", loc:"Mansura, LA", cat_code:"A", cat_en:"Procurement", cat_ko:"ì¡°ë‹¬ (Procurement)", act_en:"Fish market/wholesale presence.", act_ko:"ì–´ì‹œì¥ ë° ë„ë§¤", why_en:"Inland node supporting rough-fish flows.", why_ko:"ì¡ì–´(Rough-fish) íë¦„ì„ ì§€ì›í•˜ëŠ” ë‚´ë¥™ ê±°ì ", note_en:"Verify wholesale volume vs retail.", note_ko:"ì†Œë§¤ ëŒ€ë¹„ ë„ë§¤ ë¬¼ëŸ‰ ë¹„ì¤‘ í™•ì¸", lat:31.0560, lng:-92.0500, type:"proc", mx:28, my:82 },
            { id:6, name_en:"J. Bernard Seafood", loc:"Cottonport, LA", cat_code:"A", cat_en:"Procurement", cat_ko:"ì¡°ë‹¬ (Procurement)", act_en:"Inland seafood company.", act_ko:"ë‚´ë¥™ ìˆ˜ì‚° íšŒì‚¬", why_en:"Consolidation target for procurement/trucking.", why_ko:"ì¡°ë‹¬ ë° ìš´ì†¡ í†µí•© íƒ€ê²Ÿ", note_en:"Value is site + relationships.", note_ko:"ë¶€ì§€ì™€ ê´€ê³„ë§ì´ í•µì‹¬ ê°€ì¹˜", lat:30.9877, lng:-92.0532, type:"proc", mx:45, my:85 },

            // B) LA PROCESSORS
            { id:7, name_en:"Bayou Shrimp Processors", loc:"Delcambre, LA", cat_code:"B", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Shrimp processing.", act_ko:"ìƒˆìš° ê°€ê³µ", why_en:"Candidate for bait packs/rough fish blocks.", why_ko:"ë¯¸ë¼ í¬ì¥ ë° ì¡ì–´ ë¸”ë¡ ê°€ê³µ í›„ë³´", note_en:"Confirm freezer type/wastewater.", note_ko:"ëƒ‰ë™ê¸° íƒ€ì… ë° íìˆ˜ ì²˜ë¦¬ í™•ì¸", lat:29.9510, lng:-91.9830, type:"proc_plant", mx:70, my:20 },
            { id:8, name_en:"Gulf Crown Seafood", loc:"Delcambre, LA", cat_code:"B", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Shrimp processing (Block/IQF).", act_ko:"ìƒˆìš° ê°€ê³µ (ë¸”ë¡/IQF)", why_en:"Rare IQF capability for 'free-flowing bait'.", why_ko:"IQF ë³´ìœ  (ê³ ë¶€ê°€ê°€ì¹˜ ë¯¸ë¼ ìƒì‚° ê°€ëŠ¥)", note_en:"Finished-product oriented.", note_ko:"ì™„ì œí’ˆ ì¤‘ì‹¬ ìš´ì˜", lat:29.9480, lng:-91.9820, type:"proc_plant", mx:68, my:18 },
            { id:9, name_en:"Ocean Harvest Wholesale", loc:"Delcambre, LA", cat_code:"B", cat_en:"Wholesale", cat_ko:"ë„ë§¤ (Wholesale)", act_en:"Wholesale seafood supplier.", act_ko:"ìˆ˜ì‚°ë¬¼ ë„ë§¤ ê³µê¸‰", why_en:"Route-to-market + procurement.", why_ko:"íŒë§¤ ê²½ë¡œ ë° ì¡°ë‹¬", note_en:"Distributor vs Freezer owner?", note_ko:"ìœ í†µì‚¬ì¸ì§€ ëƒ‰ë™ê³  ë³´ìœ ìì¸ì§€ í™•ì¸", lat:29.9530, lng:-91.9850, type:"proc_plant", mx:65, my:25 },
            { id:10, name_en:"Ocean Select Seafood", loc:"Cecilia, LA", cat_code:"B", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Seafood sales/processing.", act_ko:"ìˆ˜ì‚°ë¬¼ ê°€ê³µ ë° íŒë§¤", why_en:"Near South-LA logistics; processor anchor.", why_ko:"ë‚¨ë¶€ ë£¨ì´ì§€ì• ë‚˜ ë¬¼ë¥˜ ì¸ì ‘", note_en:"Validate processing depth.", note_ko:"ê°€ê³µ ì—­ëŸ‰ ê²€ì¦ í•„ìš”", lat:30.3394, lng:-91.8550, type:"proc_plant", mx:75, my:35 },
            { id:11, name_en:"Lafitte Frozen Foods", loc:"Lafitte, LA", cat_code:"B", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Frozen seafood company.", act_ko:"ëƒ‰ë™ ìˆ˜ì‚°ë¬¼ ê¸°ì—…", why_en:"Strong access to coastal landings.", why_ko:"ì—°ì•ˆ ì–´íšë¬¼ ì ‘ê·¼ì„± ìš°ìˆ˜", note_en:"Higher hurricane exposure.", note_ko:"í—ˆë¦¬ì¼€ì¸ ë…¸ì¶œ ìœ„í—˜ ë†’ìŒ", lat:29.6640, lng:-90.1150, type:"proc_plant", mx:78, my:15 },
            { id:12, name_en:"Bluewater Shrimp Co", loc:"Dulac, LA", cat_code:"B", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Wholesale frozen shrimp.", act_ko:"ëƒ‰ë™ ìƒˆìš° ë„ë§¤", why_en:"Working shrimp hub; bolt-on freezer asset.", why_ko:"ìš´ì˜ ì¤‘ì¸ ìƒˆìš° í—ˆë¸Œ, ì¶”ê°€ ì¸ìˆ˜ ìì‚°", note_en:"Confirm plant condition/labor.", note_ko:"ê³µì¥ ìƒíƒœ ë° ì¸ë ¥ í™•ì¸", lat:29.3820, lng:-90.7140, type:"proc_plant", mx:60, my:10 },
            { id:13, name_en:"Anna Marie Shrimp", loc:"Montegut, LA", cat_code:"B", cat_en:"Bolt-on", cat_ko:"ì¶”ê°€ì¸ìˆ˜ (Bolt-on)", act_en:"Shrimp business.", act_ko:"ìƒˆìš° ì‚¬ì—…", why_en:"Freeze/pack platform in Terrebonne.", why_ko:"í…Œë ˆë³¸ ì§€ì—­ì˜ ëƒ‰ë™/í¬ì¥ í”Œë«í¼", note_en:"Verify wholesale vs retail split.", note_ko:"ë„ì†Œë§¤ ë¹„ì¤‘ í™•ì¸", lat:29.4750, lng:-90.5600, type:"proc_plant", mx:40, my:12 },
            { id:14, name_en:"Faith Family Shrimp", loc:"Chauvin, LA", cat_code:"B", cat_en:"Bolt-on", cat_ko:"ì¶”ê°€ì¸ìˆ˜ (Bolt-on)", act_en:"Shrimp processing.", act_ko:"ìƒˆìš° ê°€ê³µ", why_en:"Supports bait shrimp / frozen packs.", why_ko:"ë¯¸ë¼ ìƒˆìš° ë° ëƒ‰ë™ íŒ© ì§€ì›", note_en:"Can they take non-shrimp?", note_ko:"ë¹„(é)ìƒˆìš° ì–´ì¢… ì²˜ë¦¬ ê°€ëŠ¥ ì—¬ë¶€", lat:29.4350, lng:-90.5950, type:"proc_plant", mx:45, my:10 },
            { id:15, name_en:"David Chauvin's Seafood", loc:"Dulac, LA", cat_code:"B", cat_en:"Bolt-on", cat_ko:"ì¶”ê°€ì¸ìˆ˜ (Bolt-on)", act_en:"Wholesale seafood supplier.", act_ko:"ìˆ˜ì‚°ë¬¼ ë„ë§¤", why_en:"Dockside procurement + freezing.", why_ko:"ë¶€ë‘ ì¡°ë‹¬ ë° ëƒ‰ë™", note_en:"Full processor or dock?", note_ko:"ë‹¨ìˆœ ë¶€ë‘ì¸ì§€ ê°€ê³µ ê³µì¥ì¸ì§€ í™•ì¸", lat:29.3820, lng:-90.7130, type:"proc_plant", mx:35, my:8 },
            { id:16, name_en:"Hi-Seas of Dulac", loc:"Dulac, LA", cat_code:"B", cat_en:"Bolt-on", cat_ko:"ì¶”ê°€ì¸ìˆ˜ (Bolt-on)", act_en:"Listed seafood business.", act_ko:"ìˆ˜ì‚°ë¬¼ ê¸°ì—…", why_en:"Dulac-based supply network.", why_ko:"ë“ˆë½ ê¸°ë°˜ ê³µê¸‰ë§", note_en:"Confirm operating status.", note_ko:"í˜„ì¬ ìš´ì˜ ìƒíƒœ í™•ì¸", lat:29.3870, lng:-90.7120, type:"proc_plant", mx:30, my:15 },
            { id:17, name_en:"Big D's Seafood", loc:"Franklin, LA", cat_code:"B", cat_en:"Bolt-on", cat_ko:"ì¶”ê°€ì¸ìˆ˜ (Bolt-on)", act_en:"Sells fresh/frozen seafood.", act_ko:"ì‹ ì„ /ëƒ‰ë™ ìˆ˜ì‚°ë¬¼ íŒë§¤", why_en:"Relevant Franklin-area logistics.", why_ko:"í”„ë­í´ë¦° ì§€ì—­ ë¬¼ë¥˜ ê±°ì ", note_en:"Likely smaller; procurement node.", note_ko:"ì†Œê·œëª¨ ì¶”ì •; ì¡°ë‹¬ ê±°ì ", lat:29.7960, lng:-91.5020, type:"proc_plant", mx:25, my:30 },
            { id:18, name_en:"Corina Corina Seafood", loc:"Galliano, LA", cat_code:"B", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Shrimp brand (-40F freezer).", act_ko:"ìƒˆìš° ë¸Œëœë“œ (-40ë„ ëƒ‰ë™)", why_en:"-40Â°F is meaningful for premium quality.", why_ko:"-40ë„ ëƒ‰ë™ì€ í”„ë¦¬ë¯¸ì—„ í’ˆì§ˆ í•µì‹¬", note_en:"Niche brand vs volume plant?", note_ko:"ë‹ˆì¹˜ ë¸Œëœë“œì¸ì§€ ëŒ€ëŸ‰ ìƒì‚°ì¸ì§€ í™•ì¸", lat:29.4430, lng:-90.2980, type:"proc_plant", mx:55, my:12 },
            { id:19, name_en:"Louisiana Newpack Shrimp", loc:"Westwego, LA", cat_code:"B", cat_en:"Logistics", cat_ko:"ë¬¼ë¥˜ (Logistics)", act_en:"Distributor/Broker/Processor.", act_ko:"ìœ í†µ/ì¤‘ê°œ/ê°€ê³µ", why_en:"Strong logistics near New Orleans.", why_ko:"ë‰´ì˜¬ë¦¬ì–¸ìŠ¤ ì¸ê·¼ ê°•ë ¥í•œ ë¬¼ë¥˜", note_en:"Confirm processing assets.", note_ko:"ê°€ê³µ ìì‚° í™•ì¸ í•„ìš”", lat:29.9100, lng:-90.1400, type:"proc_plant", mx:60, my:40 },
            { id:20, name_en:"Craig Borges' NO Seafood", loc:"Metairie, LA", cat_code:"B", cat_en:"Wholesale", cat_ko:"ë„ë§¤ (Wholesale)", act_en:"Wholesale seafood.", act_ko:"ìˆ˜ì‚°ë¬¼ ë„ë§¤", why_en:"Strong sales channels + relationships.", why_ko:"ê°•ë ¥í•œ íŒë§¤ ì±„ë„ ë° ê´€ê³„", note_en:"Freezer owner or outsource?", note_ko:"ëƒ‰ë™ê³  ì†Œìœ  ì—¬ë¶€ í™•ì¸", lat:30.0000, lng:-90.1700, type:"proc_plant", mx:50, my:38 },
            { id:21, name_en:"Louisiana Blue Crab", loc:"Kaplan, LA", cat_code:"B", cat_en:"Adjacency", cat_ko:"ì¸ì ‘ë¶„ì•¼ (Adjacency)", act_en:"Blue crab distribution.", act_ko:"ê½ƒê²Œ ìœ í†µ", why_en:"Multi-species revenue stabilizes cashflow.", why_ko:"ë‹¤ì–‘í•œ ì–´ì¢…ìœ¼ë¡œ í˜„ê¸ˆíë¦„ ì•ˆì •í™”", note_en:"Consider as adjacency.", note_ko:"ì¸ì ‘ ë¶„ì•¼ë¡œ ê³ ë ¤", lat:30.0050, lng:-92.2850, type:"proc_plant", mx:45, my:35 },

            // C) OYSTERS
            { id:22, name_en:"Wilson's Oysters", loc:"Houma, LA", cat_code:"C", cat_en:"Shellfish", cat_ko:"ì¡°ê°œë¥˜ (Shellfish)", act_en:"Oyster wholesaler.", act_ko:"êµ´ ë„ë§¤", why_en:"Shellfish ops have high QA discipline.", why_ko:"ë†’ì€ í’ˆì§ˆê´€ë¦¬ ê·œìœ¨ ë³´ìœ ", note_en:"Strict regulatory reqs.", note_ko:"ì—„ê²©í•œ ê·œì œ ìš”êµ¬ì‚¬í•­", lat:29.5850, lng:-90.7050, type:"proc_plant", mx:30, my:20 },
            { id:23, name_en:"Motivatit Seafoods", loc:"Houma, LA", cat_code:"C", cat_en:"Shellfish", cat_ko:"ì¡°ê°œë¥˜ (Shellfish)", act_en:"Seafood company.", act_ko:"ìˆ˜ì‚°ë¬¼ ê¸°ì—…", why_en:"Cold chain footprint in Terrebonne.", why_ko:"í…Œë ˆë³¸ ì§€ì—­ ì½œë“œì²´ì¸ ê±°ì ", note_en:"Confirm product mix.", note_ko:"ì œí’ˆ ë¯¹ìŠ¤ í™•ì¸", lat:29.5950, lng:-90.7100, type:"proc_plant", mx:50, my:18 },
            { id:24, name_en:"Crystal Seas Oysters", loc:"Pass Christian, MS", cat_code:"C", cat_en:"Shellfish", cat_ko:"ì¡°ê°œë¥˜ (Shellfish)", act_en:"Oyster harvesting/processing.", act_ko:"êµ´ ì±„ì·¨/ê°€ê³µ", why_en:"Cold chain anchor on MS coast.", why_ko:"ë¯¸ì‹œì‹œí”¼ ì—°ì•ˆ ì½œë“œì²´ì¸ ì•µì»¤", note_en:"Transferable cold storage discipline.", note_ko:"ì´ì „ ê°€ëŠ¥í•œ ëƒ‰ë™ ê·œìœ¨", lat:30.3150, lng:-89.2450, type:"proc_plant", mx:60, my:15 },

            // D) MS PROCESSORS
            { id:25, name_en:"C.F. Gollott & Son", loc:"Biloxi, MS", cat_code:"D", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Wild-caught shrimp brand/processing.", act_ko:"ìì—°ì‚° ìƒˆìš° ë¸Œëœë“œ/ê°€ê³µ", why_en:"Established processing + scale.", why_ko:"í™•ë¦½ëœ ê°€ê³µ ëŠ¥ë ¥ ë° ê·œëª¨", note_en:"Different scale than Omega.", note_ko:"ì˜¤ë©”ê°€ì™€ëŠ” ë‹¤ë¥¸ ê·œëª¨", lat:30.4350, lng:-88.8950, type:"proc_plant", mx:88, my:10 },
            { id:26, name_en:"Biloxi Freezing", loc:"Biloxi, MS", cat_code:"D", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Large shrimp processor.", act_ko:"ëŒ€í˜• ìƒˆìš° ê°€ê³µì—…ì²´", why_en:"High-capacity plant platform.", why_ko:"ëŒ€ìš©ëŸ‰ ê³µì¥ í”Œë«í¼", note_en:"Too large for sale?", note_ko:"ë§¤ë¬¼ë¡œ ë‚˜ì˜¤ê¸°ì—” ë„ˆë¬´ í°ê°€?", lat:30.4000, lng:-88.8900, type:"proc_plant", mx:92, my:8 },
            { id:27, name_en:"Golden Gulf Coast", loc:"Biloxi, MS", cat_code:"D", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Seafood wholesale/packing.", act_ko:"ìˆ˜ì‚°ë¬¼ ë„ë§¤/í¬ì¥", why_en:"Processor/packer adjacency.", why_ko:"ê°€ê³µ/í¬ì¥ ì¸ì ‘ì„±", note_en:"Confirm throughput.", note_ko:"ì²˜ë¦¬ëŸ‰ í™•ì¸", lat:30.3950, lng:-88.8850, type:"proc_plant", mx:82, my:12 },
            { id:28, name_en:"Gulf Coast Cold Storage", loc:"Pascagoula, MS", cat_code:"D", cat_en:"Cold Hub", cat_ko:"ëƒ‰ë™ í—ˆë¸Œ (Cold Hub)", act_en:"Port-based cold storage.", act_ko:"í•­ë§Œ ê¸°ë°˜ ëƒ‰ë™ì°½ê³ ", why_en:"Pure cold-chain infrastructure play.", why_ko:"ìˆœìˆ˜ ì½œë“œì²´ì¸ ì¸í”„ë¼ í”Œë ˆì´", note_en:"Diligence is on warehouse contracts.", note_ko:"ì°½ê³  ê³„ì•½ ì‹¤ì‚¬ í•„ìš”", lat:30.3600, lng:-88.5600, type:"hub", mx:98, my:15 },
            { id:29, name_en:"Desporte Seafood", loc:"Biloxi, MS", cat_code:"D", cat_en:"Retail/Wholesale", cat_ko:"ë„ì†Œë§¤ (Retail/Wholesale)", act_en:"Retail market + wholesale.", act_ko:"ì†Œë§¤ ì‹œì¥ ë° ë„ë§¤", why_en:"Strong local route-to-market.", why_ko:"ê°•ë ¥í•œ ì§€ì—­ íŒë§¤ ê²½ë¡œ", note_en:"Retail-forward; freezer capacity?", note_ko:"ì†Œë§¤ ì¤‘ì‹¬; ëƒ‰ë™ ìš©ëŸ‰ í™•ì¸ í•„ìš”", lat:30.3920, lng:-88.8880, type:"proc_plant", mx:40, my:15 },
            { id:30, name_en:"Quality Poultry & Seafood", loc:"Biloxi, MS", cat_code:"D", cat_en:"Risk", cat_ko:"ë¦¬ìŠ¤í¬ (Risk)", act_en:"Retail + wholesale.", act_ko:"ì†Œë§¤ ë° ë„ë§¤", why_en:"Scale + distribution network.", why_ko:"ê·œëª¨ ë° ìœ í†µë§ ë³´ìœ ", note_en:"Major compliance/legal risks.", note_ko:"ì£¼ìš” ë²•ì /ê·œì œ ë¦¬ìŠ¤í¬ ì¡´ì¬", lat:30.3940, lng:-88.8920, type:"proc_plant", mx:65, my:12 },

            // E) AL PROCESSORS
            { id:31, name_en:"Dominick's Seafood", loc:"Bayou La Batre, AL", cat_code:"E", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Processing/distribution.", act_ko:"ê°€ê³µ ë° ìœ í†µ", why_en:"Anchor freezer operation in key port.", why_ko:"ì£¼ìš” í•­êµ¬ì˜ ì•µì»¤ ëƒ‰ë™ ì‹œì„¤", note_en:"Split: processing vs distro.", note_ko:"ê°€ê³µ ëŒ€ ìœ í†µ ë¹„ì¤‘ í™•ì¸", lat:30.4049, lng:-88.2560, type:"proc_plant", mx:75, my:5 },
            { id:32, name_en:"Sea Pearl Seafood", loc:"Bayou La Batre, AL", cat_code:"E", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Shrimp processor (IQF).", act_ko:"ìƒˆìš° ê°€ê³µ (IQF)", why_en:"IQF aligns with bait convenience.", why_ko:"IQFëŠ” ë¯¸ë¼ í¸ì˜ì„±ê³¼ ë¶€í•©", note_en:"Co-packing potential.", note_ko:"ìœ„íƒìƒì‚°(Co-packing) ì ì¬ë ¥", lat:30.4030, lng:-88.2490, type:"proc_plant", mx:72, my:8 },
            { id:33, name_en:"Graham Shrimp Co", loc:"Bayou La Batre, AL", cat_code:"E", cat_en:"Processor", cat_ko:"ê°€ê³µ (Processor)", act_en:"Shrimp processor (IQF/Block).", act_ko:"ìƒˆìš° ê°€ê³µ (IQF/ë¸”ë¡)", why_en:"Direct 'freeze-format' platform.", why_ko:"ì§ì ‘ì ì¸ ëƒ‰ë™ í¬ë§· í”Œë«í¼", note_en:"Confirm freezer types (Nitrogen/Mech).", note_ko:"ëƒ‰ë™ ë°©ì‹(ì§ˆì†Œ/ê¸°ê³„ì‹) í™•ì¸", lat:30.4020, lng:-88.2450, type:"proc_plant", mx:62, my:5 },

            // F) COLD ASSETS
            { id:34, name_en:"601 Neosho Ave", loc:"Baton Rouge, LA", cat_code:"F", cat_en:"Asset Sale", cat_ko:"ìì‚°ë§¤ê° (Asset Sale)", act_en:"Facility asset (Cold storage).", act_ko:"ì‹œì„¤ ìì‚° (ëƒ‰ë™ì°½ê³ )", why_en:"Central freezer hub for inland/coastal flows.", why_ko:"ë‚´ë¥™/í•´ì•ˆ íë¦„ì„ ìœ„í•œ ì¤‘ì•™ ëƒ‰ë™ í—ˆë¸Œ", note_en:"Verify asset specs/maintenance.", note_ko:"ìì‚° ì‚¬ì–‘ ë° ìœ ì§€ë³´ìˆ˜ í™•ì¸", lat:30.4632, lng:-91.1925, type:"hub", mx:95, my:40 },
            { id:35, name_en:"Sub-Zero Storage", loc:"Eunice, LA", cat_code:"F", cat_en:"Cold Hub", cat_ko:"ëƒ‰ë™ í—ˆë¸Œ (Cold Hub)", act_en:"Cold storage operator.", act_ko:"ëƒ‰ë™ì°½ê³  ìš´ì˜", why_en:"Hurricane-resilient secondary node.", why_ko:"í—ˆë¦¬ì¼€ì¸ì— ê°•í•œ ë³´ì¡° ê±°ì ", note_en:"Verify pallet positions/temps.", note_ko:"íŒ”ë ˆíŠ¸ ìš©ëŸ‰ ë° ì˜¨ë„ í™•ì¸", lat:30.4950, lng:-92.4500, type:"hub", mx:92, my:25 }
        ];

        let currentLang = 'en';

        // --- APP LOGIC ---
        function setLang(lang) {
            currentLang = lang;
            document.body.className = lang === 'ko' ? 'korean-mode' : '';
            
            // Toggle Tab Buttons
            document.getElementById('btn-lang-en').className = lang === 'en' ? 'px-3 py-1.5 text-xs font-bold rounded-md bg-slate-800 text-white transition-all' : 'px-3 py-1.5 text-xs font-bold rounded-md text-slate-500 hover:bg-slate-50 transition-all';
            document.getElementById('btn-lang-ko').className = lang === 'ko' ? 'px-3 py-1.5 text-xs font-bold rounded-md bg-slate-800 text-white transition-all' : 'px-3 py-1.5 text-xs font-bold rounded-md text-slate-500 hover:bg-slate-50 transition-all';
            
            renderMap();
            renderMatrix();
            renderTable();
        }

        // --- 1. MAP RENDER ---
        const map = L.map('map').setView([30.0, -90.5], 7); 
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: '&copy; OpenStreetMap' }).addTo(map);
        let mapLayerGroup = L.layerGroup().addTo(map);

        function renderMap() {
            mapLayerGroup.clearLayers();
            const colors = { proc: '#10b981', proc_plant: '#2563eb', hub: '#9333ea' }; // Emerald, Blue, Purple
            
            companies.forEach(c => {
                // Name ALWAYS in English per request
                const name = c.name_en; 
                const desc = currentLang === 'en' ? c.cat_en : c.cat_ko;
                const color = colors[c.type] || '#2563eb';
                
                L.circleMarker([c.lat, c.lng], {
                    color: 'white', fillColor: color, fillOpacity: 0.9, radius: 8, weight: 2
                }).bindPopup(`<b>${name}</b><br><span style="color:#64748b">${desc}</span>`).addTo(mapLayerGroup);
            });
        }

        // --- 2. MATRIX RENDER ---
        function renderMatrix() {
            const container = document.getElementById('matrix-container');
            container.innerHTML = '';
            
            companies.forEach(c => {
                // Name ALWAYS in English per request
                const name = c.name_en;
                const type = currentLang === 'en' ? c.cat_en : c.cat_ko;
                const colorClass = c.type === 'proc' ? 'bg-emerald-500' : (c.type === 'hub' ? 'bg-purple-600' : 'bg-blue-600');
                
                // Add "Risk" red override
                const finalColor = c.id === 30 ? 'bg-red-500' : colorClass; 

                const el = document.createElement('div');
                el.style.left = c.mx + '%';
                el.style.bottom = c.my + '%';
                el.className = `absolute w-3 h-3 md:w-4 md:h-4 rounded-full border border-white shadow-sm cursor-pointer matrix-point flex items-center justify-center transform -translate-x-1/2 -translate-y-1/2 ${finalColor}`;
                el.innerHTML = `
                    <div class="matrix-tooltip absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-800 text-white text-[10px] rounded shadow-lg z-50">
                        <div class="font-bold whitespace-nowrap">${name}</div>
                        <div class="text-[9px] text-slate-300 italic whitespace-nowrap">${type}</div>
                        <div class="w-2 h-2 bg-slate-800 absolute -bottom-1 left-1/2 -translate-x-1/2 rotate-45"></div>
                    </div>
                `;
                container.appendChild(el);
            });
        }

        // --- 3. TABLE RENDER ---
        function renderTable() {
            const tbody = document.getElementById('target-table-body');
            tbody.innerHTML = '';
            
            // Group headers translation
            const headers = {
                'A': { en: 'A) LOUISIANA FRESHWATER PROCUREMENT', ko: 'A) ë£¨ì´ì§€ì• ë‚˜ ë¯¼ë¬¼/ê°• ì¡°ë‹¬' },
                'B': { en: 'B) LOUISIANA GULF PROCESSORS', ko: 'B) ë£¨ì´ì§€ì• ë‚˜ ë©•ì‹œì½”ë§Œ ê°€ê³µì—…ì²´' },
                'C': { en: 'C) SHELLFISH PROCESSORS', ko: 'C) ì¡°ê°œë¥˜/êµ´ ê°€ê³µì—…ì²´' },
                'D': { en: 'D) MISSISSIPPI PROCESSORS', ko: 'D) ë¯¸ì‹œì‹œí”¼ ê°€ê³µì—…ì²´' },
                'E': { en: 'E) ALABAMA (BAYOU LA BATRE)', ko: 'E) ì•¨ë¼ë°°ë§ˆ (Bayou La Batre)' },
                'F': { en: 'F) COLD STORAGE ASSETS', ko: 'F) ëƒ‰ë™ì°½ê³  ìì‚°' }
            };

            let currentSection = '';

            companies.forEach(c => {
                // Section Header
                if (c.cat_code !== currentSection) {
                    currentSection = c.cat_code;
                    const hText = currentLang === 'en' ? headers[c.cat_code].en : headers[c.cat_code].ko;
                    const row = document.createElement('tr');
                    row.className = 'bg-slate-50';
                    row.innerHTML = `<td colspan="6" class="p-2 text-xs font-bold text-slate-500 bg-slate-100">${hText}</td>`;
                    tbody.appendChild(row);
                }

                // Data Row
                const row = document.createElement('tr');
                row.className = 'hover:bg-blue-50 border-b border-slate-50 last:border-0';
                
                // Name ALWAYS in English per request
                const name = c.name_en;
                // Add number prefix
                const displayName = `${c.id}. ${name}`;
                
                const cat = currentLang === 'en' ? c.cat_en : c.cat_ko;
                const act = currentLang === 'en' ? c.act_en : c.act_ko;
                const why = currentLang === 'en' ? c.why_en : c.why_ko;
                const note = currentLang === 'en' ? c.note_en : c.note_ko;

                // Color badge logic
                let badgeColor = 'bg-slate-100 text-slate-600';
                if(c.type === 'proc') badgeColor = 'bg-emerald-100 text-emerald-800';
                if(c.type === 'proc_plant') badgeColor = 'bg-blue-100 text-blue-800';
                if(c.type === 'hub') badgeColor = 'bg-purple-100 text-purple-800';
                if(c.id === 30) badgeColor = 'bg-red-100 text-red-800'; // Risk item

                row.innerHTML = `
                    <td class="p-3 font-bold text-slate-800">${displayName}</td>
                    <td class="p-3 text-slate-600">${c.loc}</td>
                    <td class="p-3"><span class="${badgeColor} px-2 py-1 rounded text-[10px] font-bold whitespace-nowrap">${cat}</span></td>
                    <td class="p-3 text-slate-600">${act}</td>
                    <td class="p-3 text-slate-600">${why}</td>
                    <td class="p-3 text-slate-500 italic">${note}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // --- VIEW SWITCHER ---
        function switchView(viewName) {
            const overview = document.getElementById('view-overview');
            const list = document.getElementById('view-list');
            const btnOverview = document.getElementById('btn-overview');
            const btnList = document.getElementById('btn-list');

            if(viewName === 'overview') {
                overview.classList.remove('hidden-view');
                list.classList.add('hidden-view');
                
                btnOverview.className = 'active-tab w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-sm transition-all transform active:scale-95 text-center';
                btnList.className = 'inactive-tab w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-sm transition-all transform active:scale-95 text-center';
                
                setTimeout(() => { map.invalidateSize(); }, 100);
            } else {
                overview.classList.add('hidden-view');
                list.classList.remove('hidden-view');
                
                btnList.className = 'active-tab w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-sm transition-all transform active:scale-95 text-center';
                btnOverview.className = 'inactive-tab w-full sm:w-auto px-6 py-3 rounded-xl font-bold text-sm transition-all transform active:scale-95 text-center';
            }
        }

        // --- INIT ---
        renderMap();
        renderMatrix();
        renderTable();
    </script>
</body>
</html>
